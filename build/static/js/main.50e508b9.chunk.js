(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){e.exports=n(379)},205:function(e,t,n){},377:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(77),i=n.n(s),c=(n(205),n(14)),l=n.n(c),o=n(21),u=n(30),d=n(8),p=n(9),m=n(11),h=n(10),f=n(12),g=n(399),v=n(392),E=n(393),b=n(396),y=n(391),w={borderRadius:"5px",backgroundColor:"#FFFFFF",paddingBottom:"6%",margin:"60px auto ",minWidth:"375px",width:"80%",position:"absolute",left:0,right:0},S={zIndex:1,minWidth:"375px",paddingTop:"1em"},j={margin:"1em 0 1em 0"},k={zIndex:"1",margin:"3em 0 3em 0"},C={width:"80%",marginLeft:"10%"},O={textAlign:"center",margin:"1em auto"},_={marginRight:"0px"},x={margin:"auto auto auto 1em"},U={marginTop:"3em"},F={margin:"0 0 3em 0"},I={display:"block",textAlign:"center",margin:"auto"},A={position:"fixed",marginLeft:"calc(50% - 56px)",margin:"auto",bottom:"1em",textAlign:"center"},L={right:"10px",position:"fixed",top:"90%"},R={marginTop:"5px",textAlign:"center"},N={maxHeight:"20px",width:"auto"},P={zIndex:1,width:"70%",height:"auto",paddingLeft:"30%"},T={overflow:"hidden",margin:"5% 5% 5% 5%"},D={height:"200px",width:"auto",overflow:"hidden",margin:"0 auto",display:"block"},W={marginLeft:"calc(50% - 43px)"},z={display:"block",overflow:"hidden",maxWidth:"80%",marginLeft:"auto",marginRight:"auto",height:"auto"},B={marginLeft:"calc(50% - 80px)"},q={textAlign:"center",margin:"10% 5% 0 5%"},J={minHeight:"433px",maxHeight:"1050px",width:"300px"},M={zIndex:1,paddingTop:"3em",marginLeft:"10%",marginRight:"10%"},V={position:"fixed",maxWidth:"100%",zIndex:"100"},H={overflowY:"scroll",zIndex:120,border:"1px solid grey",padding:"5px 5px 5px 5px",borderRadius:"5px",backgroundColor:"#FFFFFF",height:"300px",minWidth:"250px",width:"20%",right:"15px",top:"50px",position:"fixed"},G={zIndex:1,paddingTop:"3em",paddingBottom:"6em",textAlign:"center"},Y={height:"200px",width:"auto",margin:" 15px auto 15px auto",display:"block",border:"1px dotted black",borderRadius:"3px",textAlign:"center"},X={height:"100px",width:"300px",margin:"auto",display:"block",border:"1px dotted black",borderRadius:"3px",textAlign:"center"},$={margin:"3% auto auto auto",width:"50%",left:0,right:0},K={maxWidth:"300px",margin:"auto auto 5px auto"},Q=K,Z={textAlign:"center",display:"inline-block"},ee={display:"inline-block",margin:"auto auto 3em"},te=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleSubmit=function(){var e=n.state,t=e.email,a=e.password;n.props.handleLogin({email:t,password:a})},n.handleChange=function(e,t){switch(t){case"email":return n.setState({email:e});case"password":return n.setState({password:e});default:return null}},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("img",{onClick:this.props.back,alt:"giftR logo",style:P,src:"https://cdn.dribbble.com/users/333998/screenshots/3062664/giftr.png"}),r.a.createElement(E.a,{style:C},r.a.createElement(E.a.Field,null,r.a.createElement("input",{onChange:function(t){return e.handleChange(t.target.value,"email")},placeholder:"Email"})),r.a.createElement(E.a.Field,null,r.a.createElement("input",{onChange:function(t){return e.handleChange(t.target.value,"password")},placeholder:"Password",type:"password"})),r.a.createElement(b.a,{onClick:this.handleSubmit,type:"submit",style:W},"Submit"),r.a.createElement("br",null),r.a.createElement("div",{style:I},r.a.createElement(y.a,{to:"/signup"},"Not a member yet? Sign up here!"))))}}]),t}(r.a.Component),ne=n(106),ae="http://giftr-backend.herokuapp.com",re="".concat(ae,"/api/v1"),se="".concat(ae,"/api/v1/signin"),ie="".concat(ae,"/api/v1/validate"),ce="".concat(ae,"/api/v1/users"),le="".concat(ae,"/api/v1/gifts"),oe="".concat(ae,"/api/v1/friendships"),ue="".concat(ae,"/api/v1/santas"),de=function(e,t){return fetch(se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){return e.json()})},pe=function(e){return fetch("".concat(ce,"/").concat(e)).then(function(e){return e.json()})},me=function(e,t){return fetch("".concat(oe,"/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,friend_id:t})}).then(function(e){return e.json()})},he=function(e,t){var n={};return"confirmed"===t?n={confirmed:!0}:"rejected"===t&&(n={rejected:!0}),fetch("".concat(oe,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(ne.a)({},n))}).then(function(e){return e.json()})},fe=function(e){return fetch("".concat(ce,"/").concat(e,"/friends")).then(function(e){return e.json()})},ge=function(e){return fetch("".concat(oe,"/").concat(e,"/unaccepted")).then(function(e){return e.json()})},ve=function(e){return fetch("".concat(oe,"/").concat(e,"/unaccepted_ids")).then(function(e){return e.json()})},Ee=function(e){return fetch("".concat(oe,"/").concat(e,"/active_request_ids")).then(function(e){return e.json()})},be=function(){return fetch("".concat(re,"/get_items"),{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()})},ye=function(e){return fetch(le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})},we=function(e){return fetch("".concat(le,"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})},Se=function(e){return fetch("".concat(le,"/").concat(e),{method:"DELETE"}).then(function(e){return e.json()})},je=function(e){return fetch("".concat(ce,"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})},ke=function(e){return fetch(ce,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})},Ce=function(e){return fetch("".concat(ce,"/search_user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:e})}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Oe=function(e){return fetch("".concat(ue,"/create_santa_list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})},_e=function(e){return fetch("".concat(ce,"/").concat(e,"/santas")).then(function(e){return e.json()})},xe=function(e){return fetch("".concat(ue,"/").concat(e,"/mark_read"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({read:!0})}).then(function(e){return e.json()})},Ue=n(105),Fe=n(389),Ie=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{style:I},this.props.title)}}]),t}(r.a.Component),Ae=n(83),Le=function(e){return r.a.createElement(Ae.Animate,{play:!0,startStyle:{transform:"translateX(100px)"},endStyle:{transform:"translateX(0)"},durationSeconds:"0.3",delaySeconds:"0"},e)},Re=function(e){return r.a.createElement(Ae.Animate,{play:!0,startStyle:{opacity:0},endStyle:{opacity:1},durationSeconds:"0.2",delaySeconds:"0.1"},e)},Ne=function(e){return r.a.createElement(Ae.Animate,{play:!0,startStyle:{transform:"translateY(-10px)",opacity:0},endStyle:{transform:"translateY(0)",opacity:1},durationSeconds:"0.3",delaySeconds:"0"},e)},Pe=function(e){return r.a.createElement(Ae.Animate,{play:!0,startStyle:{transform:"translateX(30px)",opacity:0},endStyle:{transform:"translateX(0)",opacity:1},reverseDurationSeconds:"0.2",durationSeconds:"0.1",delaySeconds:"0"},e)},Te=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={rating:0,name:n.props.editing&&n.props.wish.name?n.props.wish.name:"",description:n.props.editing&&n.props.wish.description?n.props.wish.description:"",url:n.props.editing&&n.props.wish.url?n.props.wish.url:"",img_url:n.props.editing&&n.props.wish.img_url?n.props.wish.img_url:"",price:n.props.editing&&n.props.wish.price?n.props.wish.price:""},n.selection=[{value:1,label:"\u2605"},{value:2,label:"\u2605\u2605"},{value:3,label:"\u2605\u2605\u2605"},{value:4,label:"\u2605\u2605\u2605\u2605"},{value:5,label:"\u2605\u2605\u2605\u2605\u2605"}],n.handleBack=function(){n.props.history.push("/wishlist")},n.deleteWish=function(){n.props.deleteWishFromDB(n.props.wish.id).then(function(){return n.props.deleteWish(n.props.wish.id)})},n.saveEdit=function(){var e=Object(ne.a)({},n.props.wish),t=n.state,a=t.rating,r=t.name,s=t.description,i=t.url,c=t.img_url,l=t.price;e.rating=a||e.rating,e.price=l||e.price,e.description=s||e.description,e.url=i||e.url,e.img_url=c||e.img_url,e.name=r||e.name,we(e).then(function(e){n.props.toggleEdit(),n.props.updateAfterEdit(e)})},n.setStars=function(e){return n.setState({rating:parseInt(e)})},n.handleSubmit=function(){var e=n.state,t=e.name,a=e.description,r=e.url,s=e.img_url,i=e.price,c=e.rating,l={name:t,description:a,url:r=r.includes("http://")&&r.includes("https://")?r:"http://"+r,img_url:s,price:i,rating:c};n.props.handleSubmit(l)},n.formFields=[{defaultValue:n.state.name,type:"text",maxLength:"20",name:"name",placeholder:"Title",onChange:function(e){return n.setState({name:e.target.value})}},{defaultValue:n.state.description,type:"text",maxLength:"20",name:"name",placeholder:"Description (up to 500 characters)",onChange:function(e){return n.setState({description:e.target.value})}},{defaultValue:n.state.url,maxLength:"500",type:"text",name:"url",placeholder:"Link to purchase",onChange:function(e){return n.setState({url:e.target.value})}},{defaultValue:n.state.img_url,maxLength:"500",type:"text",name:"img_url",placeholder:"Image link (optional)",onChange:function(e){return n.setState({img_url:e.target.value})}},{defaultValue:n.state.price,maxLength:"20",type:"number",name:"price",placeholder:"Price",onChange:function(e){return n.setState({price:parseInt(e.target.value)})}}],n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.props.editing?j:M},!this.props.editing&&r.a.createElement(Ie,{title:"Make a wish!"}),Ne(r.a.createElement(E.a,null,this.formFields.map(function(e){return r.a.createElement(E.a.Field,null,r.a.createElement("input",{key:e.name,defaultValue:e.defaultValue,maxLength:e.maxLength,type:e.type,name:e.name,placeholder:e.placeholder,onChange:function(t){return e.onChange(t)}}))}),r.a.createElement(Ue.a,null," Priority (optional): ",r.a.createElement("div",null,this.selection.map(function(t){return r.a.createElement(E.a.Field,{key:t.value,control:Fe.a,label:t.label,defaultValue:t.value,checked:e.state.rating===t.value,onChange:function(){return e.setStars(t.value)}})}))))),r.a.createElement("br",null),this.props.editing?r.a.createElement("div",null,r.a.createElement(b.a,{color:"teal",onClick:this.saveEdit},"Save changes!"),r.a.createElement(b.a,{color:"red",floated:"right",onClick:this.deleteWish},"Delete")):r.a.createElement("div",null,r.a.createElement(b.a,{color:"teal",onClick:this.handleSubmit,disabled:!this.state.name||!this.state.description||!this.state.price},"Make a wish!"),r.a.createElement(b.a,{onClick:this.handleBack,color:"red",basic:!0},"Cancel")))}}]),t}(r.a.Component),De=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return Re(r.a.createElement("div",null,r.a.createElement("img",{alt:"giftR logo",style:z,src:"https://cdn.dribbble.com/users/333998/screenshots/3062664/giftr.png"}),r.a.createElement("div",null,r.a.createElement(b.a,{style:B,onClick:function(){return e.props.history.push("/login")},color:"red"},"Log In"),r.a.createElement(b.a,{onClick:function(){return e.props.history.push("/signup")},basic:!0,color:"teal"},"Sign up")),r.a.createElement("div",{style:q},r.a.createElement("h4",null,"GiftR takes care of your holiday gifting headache"),r.a.createElement("h6",null,"Find out what other people would like to get as a gift!"))))}}]),t}(r.a.Component),We=n(395),ze=n(188),Be=n(183),qe=n.n(Be),Je=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={uploading:!1,uploadedImageURL:""},n.onImageDrop=function(e){n.setState({uploadedFile:e[0]}),n.handleImageUpload(e[0])},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleImageUpload",value:function(e){var t=this;this.setState({uploading:!0}),qe.a.post("https://api.cloudinary.com/v1_1/dotvnvsga/image/upload").field("upload_preset","eeeeee").field("file",e).end(function(e,n){e&&console.error(e),""!==n.body.secure_url&&(t.setState({uploadedImageURL:n.body.secure_url,uploading:!1}),t.props.propFunction&&t.props.propFunction(t.state.uploadedImageURL))})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.uploadedImageURL&&r.a.createElement("div",null,""===this.state.uploadedImageURL?r.a.createElement("div",null,r.a.createElement("img",{alt:"uploaded",style:Y,src:this.props.profilePicURL})):r.a.createElement("div",null,r.a.createElement("img",{alt:"uploaded file",style:Y,src:this.state.uploading?"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif":this.state.uploadedImageURL}))),r.a.createElement("div",{style:X},r.a.createElement(ze.a,{multiple:!1,onDrop:this.onImageDrop},function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive;return r.a.createElement("div",null,r.a.createElement("div",t(),r.a.createElement("input",n()),a?r.a.createElement("p",null,"Drop the bad boy here"):r.a.createElement("div",null,r.a.createElement("p",null,"Drop profile pic here or click to select one."),r.a.createElement("h1",null,"+"))))})))}}]),t}(r.a.Component),Me=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",email:"",age:"",password:"",repeat_password:"",img_url:""},n.checkFields=function(){var e=n.state,t=e.first_name,a=e.last_name,r=e.email,s=e.age,i=e.password,c=e.repeat_password;return!!(r.includes("@")&&s<100&&i.length>5&&t.length>1&&a.length>1&&i===c)},n.checkPasswords=function(){var e=n.state;return e.password===e.repeat_password},n.handleSignup=function(){var e=n.state,t=e.first_name,a=e.last_name,r=e.email,s=e.age,i=e.password,c=e.img_url;if(n.checkFields()){if(n.checkPasswords())return ke({first_name:t,last_name:a,email:r,age:s,password:i,img_url:c}).then(function(e){return e.error?alert(e.error):n.props.handleLogin({email:r,password:i})});alert("Passwords have to match.")}},n.handleChange=function(e,t){switch(t){case"first_name":return n.setState({first_name:e});case"last_name":return n.setState({last_name:e});case"email":return n.setState({email:e});case"age":return n.setState({age:parseInt(e)});case"password":return n.setState({password:e});case"repeat_password":return n.setState({repeat_password:e});case"img_url":return n.setState({img_url:e});default:return null}},n.handleImageSet=function(e){n.setState({img_url:e})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.first_name,a=t.last_name,s=t.email,i=t.age,c=t.password,l=t.repeat_password;return r.a.createElement("div",null,r.a.createElement("img",{alt:"giftR logo",onClick:this.props.back,style:P,src:"https://cdn.dribbble.com/users/333998/screenshots/3062664/giftr.png"}),r.a.createElement(Je,{propFunction:this.handleImageSet}),r.a.createElement(E.a,{error:!0,style:C},r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{onChange:function(t){return e.handleChange(t.target.value,"first_name")},placeholder:"First Name",maxLength:"20",error:n.length>0&&n.length<2})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{onChange:function(t){return e.handleChange(t.target.value,"last_name")},placeholder:"Last Name",maxLength:"20",error:a.length>0&&a.length<2})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{error:s.length<3&&!s.includes("@")&&s.length>0,maxLength:"40",onChange:function(t){return e.handleChange(t.target.value,"email")},placeholder:"Email",type:"email"})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{max:100,type:"number",step:1,onChange:function(t){return e.handleChange(t.target.value,"age")},placeholder:"Age"})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{maxLength:"50",onChange:function(t){return e.handleChange(t.target.value,"password")},placeholder:"Password",type:"password"}),c&&c.length<6&&r.a.createElement(We.a,{error:!0,content:"6 characters minimum"})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{maxLength:"50",type:"password",onChange:function(t){return e.handleChange(t.target.value,"repeat_password")},placeholder:"Repeat password"}),l&&c!==l&&r.a.createElement(We.a,{error:!0,content:"Passwords must match"})),r.a.createElement(b.a,{onClick:this.handleSignup,disabled:!n||!a||!s||!i||!c||!l,color:"teal",type:"submit",style:W},"Submit")),r.a.createElement("div",{style:I},!this.props.user&&r.a.createElement(y.a,{to:"/login"},"Already a member? Log in here!")))}}]),t}(r.a.Component),Ve=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",age:"",email:"",old_password:"",new_password:"",repeat_password:""},n.checkFields=function(){var e=n.state,t=e.first_name,a=e.last_name,r=e.email,s=e.age,i=e.new_password,c=e.repeat_password,l=e.old_password;return!(r&&!r.includes("@")||s&&!(s<100)||!l||i&&!(i.length>5)||t&&!(t.length>1)||a&&!(a.length>1)||i&&i!==c)},n.checkPasswordFields=function(){var e=n.state;return e.new_password===e.repeat_password},n.checkForPasswordPresense=function(){return!!n.state.old_password},n.handleSubmit=function(){if(n.checkPasswordFields()&&n.checkFields()&&n.checkForPasswordPresense()){var e=n.state,t=e.first_name,a=e.last_name,r=e.email,s=e.age,i=e.old_password,c=e.new_password,l=e.img_url,o=n.props.user,u={};u.id=n.props.user.id,u.age=s||o.age,u.first_name=t||o.first_name,u.last_name=a||o.last_name,u.email=r||o.email,u.img_url=l||o.img_url,u.old_password=i,u.password=c,je(u).then(function(e){e.error?alert("Incorrect current password."):(n.props.toggleEdit(),n.props.updateUser(e))})}else alert("Please check the information in the fields")},n.handleChange=function(e,t){switch(t){case"first_name":return n.setState({first_name:e});case"last_name":return n.setState({last_name:e});case"email":return n.setState({email:e});case"age":return n.setState({age:e});case"old_password":return n.setState({old_password:e});case"new_password":return n.setState({new_password:e});case"repeat_password":return n.setState({repeat_password:e});default:return null}},n.setImage=function(e){return n.setState({img_url:e})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user,n=this.state,a=n.first_name,s=n.last_name,i=n.email,c=n.age,l=n.new_password,o=n.repeat_password,u=n.old_password;return Ne(r.a.createElement("div",{style:U},r.a.createElement("div",null,r.a.createElement(Je,{profilePicURL:t.img_url,propFunction:this.setImage})),r.a.createElement(E.a,{style:C},r.a.createElement("br",null),r.a.createElement(E.a.Field,null,!this.checkForPasswordPresense()&&r.a.createElement(Ue.a,null,"Note: To save changes enter current password below."),r.a.createElement(E.a.Input,{style:U,onChange:function(t){return e.handleChange(t.target.value,"first_name")},placeholder:"First name: "+t.first_name,maxLength:"20",error:a&&a.length<2})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{onChange:function(t){return e.handleChange(t.target.value,"last_name")},placeholder:"Last Name: "+t.last_name,maxLength:"30",error:s&&s.length<2})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{onChange:function(t){return e.handleChange(t.target.value,"email")},placeholder:"Email: "+t.email,type:"text",maxLength:"30",error:i&&i.length<3&&!i.includes("@")})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{type:"number",step:1,onChange:function(t){return e.handleChange(t.target.value,"age")},placeholder:"Age: "+t.age,maxLength:"2",error:c&&parseInt(c)>100})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{type:"password",maxLength:"50",onChange:function(t){return e.handleChange(t.target.value,"old_password")},placeholder:"Current password",error:!u})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{onChange:function(t){return e.handleChange(t.target.value,"new_password")},placeholder:"New password",maxLength:"50",type:"password",error:l&&l.length<6&&"6 chars"})),r.a.createElement(E.a.Field,null,r.a.createElement(E.a.Input,{type:"password",onChange:function(t){return e.handleChange(t.target.value,"repeat_password")},maxLength:"50",placeholder:"Repeat password",error:o&&o!==l})),r.a.createElement(b.a,{onClick:this.handleSubmit,color:"teal",floated:"right",disabled:!u,type:"submit"},"Save"),r.a.createElement(b.a,{onClick:this.props.toggleEdit,color:"red",basic:!0,type:"submit"},"Cancel")),!this.props.user&&r.a.createElement("a",{href:"/login"},"Already a member? Log in here!")))}}]),t}(r.a.Component),He=n(394),Ge=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",{style:$},r.a.createElement(He.a,{fluid:!0,style:K},r.a.createElement("div",{style:T},r.a.createElement("img",{alt:"user profile pic",style:D,src:e.img_url?e.img_url:"https://pngimage.net/wp-content/uploads/2018/05/default-user-png-2.png"})),r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Header,null,"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(He.a.Meta,null,e.email),r.a.createElement(He.a.Description,null,e.age," y.o. "))),r.a.createElement("div",{style:Q},this.props.logout&&r.a.createElement(b.a,{onClick:this.props.logout,color:"red",type:"submit"},"Log Out"),this.props.toggleEdit&&r.a.createElement(b.a,{floated:"right",onClick:this.props.toggleEdit}," edit ")))}}]),t}(r.a.Component),Ye=n(335),Xe=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={editing:!1},n.toggleEdit=function(){return n.setState({editing:!n.state.editing})},n.logout=function(){n.props.logout(),n.props.history.push("")},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return this.state.editing?r.a.createElement("div",{style:U},r.a.createElement(Ie,{title:"Profile"}),r.a.createElement(Ye.a,{path:"/profile",component:function(n){return r.a.createElement(Ve,Object.assign({},n,{updateUser:e.props.setUser,toggleEdit:e.toggleEdit,user:t}))}})):Re(r.a.createElement("div",{style:U},r.a.createElement(Ie,{title:"Profile"}),r.a.createElement(Ye.a,{path:"/profile",component:function(n){return r.a.createElement(Ge,Object.assign({logout:e.logout},n,{toggleEdit:e.toggleEdit,user:t}))}})))}}]),t}(r.a.Component),$e=n(390),Ke=n(165),Qe=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).isFriend=function(e){if(n.props.friends)return n.props.friends.find(function(t){return t.id===e})?"In your friends list":"not a friend yet"},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:j},r.a.createElement(He.a.Group,{className:"ui center aligned grid"},this.props.users&&this.props.users.map(function(t){return r.a.createElement("div",{key:t.id,style:S},Le(r.a.createElement(He.a,{key:t.id,fluid:!0,onClick:function(){return e.props.selectUser(t)},header:(t.first_name?t.first_name:"")+" "+(t.last_name?t.last_name:""),meta:t.gifts.length+" wish(es)",description:e.isFriend(t.id)})))})))}}]),t}(r.a.Component),Ze=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleEdit=function(){n.props.history.push({pathnme:"/edit_wish",state:{wish:n.props.wish}})},n.state={editing:!1,wish:null},n.componentDidMount=function(){n.props.wish&&n.setState({wish:n.props.wish})},n.updateAfterEdit=function(e){n.setState({wish:e})},n.renderStars=function(e){switch(e){case 5:return"\u2605\u2605\u2605\u2605\u2605";case 4:return"\u2605\u2605\u2605\u2605";case 3:return"\u2605\u2605\u2605";case 2:return"\u2605\u2605";case 1:return"\u2605";default:return"No rating specified."}},n.toggleEdit=function(){n.setState({editing:!n.state.editing})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.currentUser,t=this.state.wish;return this.state.wish?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(He.a,{style:J},r.a.createElement("div",{style:T},r.a.createElement("img",{alt:"wish",style:D,src:t.img_url||"https://images.immediate.co.uk/volatile/sites/3/2017/11/imagenotavailable1-39de324.png"})),r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Header,null,r.a.createElement(Ke.a,{name:"star"}),t.name),r.a.createElement(He.a.Meta,null,r.a.createElement("span",{className:"price"},"\xa3 ",t.price||"Price unspecified"," ")),r.a.createElement(He.a.Description,null,t.description||"No description provided"," "),t.url&&"http://"!==t.url?r.a.createElement(He.a.Description,null,r.a.createElement("a",{href:t.url},"Purchase here!")):r.a.createElement(He.a.Description,null,"No purchase link provided")),r.a.createElement(He.a.Content,{extra:!0},"Rating: ",this.renderStars(t.rating),e.id===t.user_id&&r.a.createElement(b.a,{floated:"right",size:"mini",color:"teal",basic:!0,onClick:this.toggleEdit},this.state.editing?"Cancel":"Edit"),this.state.editing&&r.a.createElement(Te,{deleteWishFromDB:this.props.deleteWishFromDB,deleteWish:this.props.deleteWish,editing:!0,wish:t,updateAfterEdit:this.updateAfterEdit,toggleEdit:this.toggleEdit})))):r.a.createElement("div",null)}}]),t}(r.a.Component),et=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).sendFriendRequest=function(){var e=Object(o.a)(l.a.mark(function e(t,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t,a);case 2:return e.next=4,n.getActiveRequestIds(t);case 4:return e.next=6,n.getUnacceptedIds(t);case 6:return e.abrupt("return",console.log("done rendering"));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.state={unaccepted_ids:null,active_request_ids:null},n.getUnacceptedIds=function(){var e=Object(o.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:return a=e.sent,e.abrupt("return",n.setState({unaccepted_ids:a}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getActiveRequestIds=function(){var e=Object(o.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t);case 2:return a=e.sent,e.abrupt("return",n.setState({active_request_ids:a}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.componentDidMount=Object(o.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.getUnacceptedIds(n.props.currentUser.id),n.getActiveRequestIds(n.props.currentUser.id);case 2:case"end":return e.stop()}},e,this)})),n.renderCorrectButton=function(e){return n.state.unaccepted_ids&&n.state.unaccepted_ids.find(function(t){return t===e})?r.a.createElement("div",{style:R},r.a.createElement("h5",null,"You were added as a friend. Accept request from notifications.")):n.props.currentUser.id!==n.props.user.id?n.state.active_request_ids&&n.state.active_request_ids.find(function(t){return t===e})?r.a.createElement("div",{style:R},r.a.createElement("h5",null,"Friend request sent")):n.props.friends&&!n.props.friends.find(function(t){return t.id===e})?r.a.createElement("div",{style:R},r.a.createElement(b.a,{basic:!0,color:"teal",onClick:function(){return n.sendFriendRequest(n.props.currentUser.id,n.props.user.id)}},"Add friend")):!n.props.currentUser.id!==n.props.user.id&&r.a.createElement("div",null,r.a.createElement("div",{style:R},r.a.createElement("img",{alt:"green tick",src:"https://us.123rf.com/450wm/stas11/stas111706/stas11170600111/80189104-green-check-mark-icon-tick-symbol-in-green-color-vector-illustration.jpg?ver=6",style:N}),"Already a mate")):void 0},n.userProfile=function(){var e=n.props.user.id;return r.a.createElement("div",null,r.a.createElement(Ge,{user:n.props.user}),n.renderCorrectButton(e))},n.renderButton=function(){return n.props.search?r.a.createElement(b.a,{className:"circular",color:"teal",onClick:n.props.resetUser,style:A},r.a.createElement(Ke.a,{name:"angle left"})," Go back"):r.a.createElement(b.a,{className:"circular",circular:!0,color:"red",onClick:n.createWish,style:L},r.a.createElement("h1",null,"+"))},n.createWish=function(){return n.props.history.push("/new_wish")},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user?this.props.user:this.props.currentUser;if(t&&this.props.gifts)return Re(r.a.createElement("div",null,r.a.createElement("div",{style:G},this.props.search&&this.userProfile(),r.a.createElement(Ie,{title:this.props.search?"".concat(t.first_name,"'s wishlist"):"My wishlist"}),r.a.createElement(He.a.Group,{className:"ui center aligned grid",itemsPerRow:2,style:_},this.props.gifts.length>0?this.props.gifts.sort(function(e,t){return parseInt(e.price)-parseInt(t.price)}).map(function(n){return r.a.createElement(Ze,{deleteWishFromDB:e.props.deleteWishFromDB,deleteWish:e.props.deleteWish,key:n.id,wish:n,currentUser:e.props.currentUser,user:t})}):r.a.createElement("div",{style:U},r.a.createElement("h4",null,"No wishes were made yet")))),r.a.createElement("div",{style:x},this.renderButton())))}}]),t}(r.a.Component),tt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={search:"",users:[],selectedUser:null},n.selectUser=function(e){n.setState({selectedUser:e})},n.resetUser=function(){n.setState({selectedUser:null})},n.userProfile=function(){return r.a.createElement(Ge,{user:n.state.selectedUser})},n.handleChange=function(e){n.setState({search:e.target.value})},n.findUsers=function(){return n.state.search&&Ce(n.state.search).then(function(e){return!e.error&&n.setState({users:e})})},n.backToWelcome=function(){return n.props.history.push("")},n.handleSubmit=function(){n.findUsers()},n.renderSelectedUser=function(){return r.a.createElement("div",null,r.a.createElement(et,{friends:n.props.friends,resetUser:n.resetUser,currentUser:n.props.currentUser,user:n.state.selectedUser,search:!0,gifts:n.state.selectedUser.gifts}))},n.renderUserList=function(){return Re(r.a.createElement("div",{style:G},r.a.createElement("h1",null,"Welcome to GiftR!"),r.a.createElement("br",null),r.a.createElement("h5",null,"Start by looking up a person or creating your very own wishlist!"),r.a.createElement("div",{style:k},r.a.createElement("div",{style:j},r.a.createElement(E.a,null,r.a.createElement($e.a,{className:"icon",placeholder:"Search users",onChange:function(e){return n.handleChange(e)},onSubmit:n.handleSubmit}),r.a.createElement(b.a,{type:"submit",onClick:n.handleSubmit},r.a.createElement(Ke.a,{name:"search"}),"Search")))),Le(r.a.createElement(Qe,{friends:n.props.friends,selectUser:n.selectUser,users:n.state.users,search:n.state.search}))))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.selectedUser?this.renderSelectedUser():this.renderUserList()}}]),t}(r.a.Component),nt=n(397),at=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(nt.a,{fluid:!0,inverted:!0,color:"black",style:V},r.a.createElement(nt.a.Item,{color:"teal",icon:"home",active:""===this.props.activeItem,onClick:function(){return e.props.handleItemClick("")}}),r.a.createElement(nt.a.Item,{icon:"gift",color:"teal",name:"Secret Santa",active:"santa"===this.props.activeItem,onClick:function(){return e.props.handleItemClick("santa")}}),r.a.createElement(nt.a.Item,{color:"teal",icon:"list",position:"right",active:"wishlist"===this.props.activeItem,onClick:function(){return e.props.handleItemClick("wishlist")}}),r.a.createElement(nt.a.Item,{color:"teal",icon:"users",active:"friends"===this.props.activeItem,onClick:function(){return e.props.handleItemClick("friends")}}),r.a.createElement(nt.a.Item,{color:"teal",icon:"bell",active:!0===this.props.notificationsClicked,onClick:function(){return e.props.toggleNotificationsClicked()}}),r.a.createElement(nt.a.Item,{color:"teal",icon:"user",floated:"right",active:"profile"===this.props.activeItem,onClick:function(){return e.props.handleItemClick("profile")}})))}}]),t}(r.a.Component),rt=n(82),st=n(186),it=n.n(st),ct=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).getSuggestionValue=function(e){return e.first_name},n.state={value:"",people:[]},n.getSuggestions=function(e){return e.toLowerCase().trim().split("").filter(function(e){return" "!==e}).join("").length>0?n.state.people.length>0&&n.state.people.map(function(e){return r.a.createElement("div",null,e.first_name," ",e.last_name)}):[]},n.handleAdd=function(e){e.preventDefault(),n.state.selected&&n.props.addUser(n.state.selected)&&n.setState({selected:null}),n.setState({value:""})},n.getSuggestionValue=function(e){var t=e.id,a=e.first_name,r=e.last_name;return n.setState({selected:{id:t,first_name:a,last_name:r}}),"".concat(a," ").concat(r)},n.renderSuggestion=function(e){return r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(He.a,{description:"".concat(e.first_name," ").concat(e.last_name," ").concat(n.props.users.find(function(t){return t.id===e.id})?"(already on list)":"")}))},n.onChange=function(){var e=Object(o.a)(l.a.mark(function e(t,a){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.newValue,n.setState({value:r});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.onSuggestionsFetchRequested=function(){var e=Object(o.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,e.prev=1,e.next=4,Ce(a);case 4:r=(r=e.sent).filter(function(e){return e.id!==n.props.currentUser.id}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("person not found");case 11:n.setState({people:r});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),n.onSuggestionsClearRequested=function(){n.setState({people:[]})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.people,s={placeholder:"Type a person",value:n,onChange:this.onChange};return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form"},r.a.createElement(it.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:s}),r.a.createElement("br",null),r.a.createElement("div",{style:F},r.a.createElement(b.a,{color:"teal",basic:!0,onClick:function(t){return e.handleAdd(t)}},"Add"))))}}]),t}(r.a.Component),lt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={users:[],selectedUser:null},n.selectUser=function(e){pe(e.id).then(function(e){n.setState({selectedUser:e})})},n.resetUser=function(){n.setState({selectedUser:null})},n.userProfile=function(e){return r.a.createElement("div",null,r.a.createElement(et,{friends:n.props.friends,resetUser:n.resetUser,currentUser:n.props.currentUser,user:n.state.selectedUser,search:!0,gifts:n.state.selectedUser.gifts}))},n.componentDidMount=Object(o.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.currentUser){e.next=6;break}return e.next=3,_e(n.props.currentUser.id);case 3:t=e.sent,console.log({santas:t}),t&&!t.error&&(a=t.map(function(e){var t=e.receiver;return{id:t.id,last_name:t.last_name,first_name:t.first_name,age:t.age,img_url:t.img_url,deadline:e.deadline,budget:e.budget}}),n.setState({users:a}));case 6:case"end":return e.stop()}},e,this)})),n.formatDate=function(e){return"".concat(e.split("-")[0].split(" ")[0],"-").concat(e.split("-")[1],"-").concat(e.split("-")[2].split("T")[0])},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.users,a=t.selectedUser;return a?this.userProfile(a.id):r.a.createElement("div",{style:x},n.length>0&&r.a.createElement("h3",null,"Active Secret Santas:"),n.length>0&&n.map(function(t){return r.a.createElement(He.a,{key:t.id,onClick:function(){return e.selectUser(t)},style:O,header:"".concat(t.first_name," ").concat(t.last_name),meta:"Deadline on ".concat(e.formatDate(t.deadline)),description:"Budget - \xa3".concat(t.budget)})}))}}]),t}(r.a.Component),ot=n(388),ut=n(187),dt=n.n(ut),pt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={self:!1,loading:!1,deadlineSet:!1,randomizedSet:!1,budgetSet:!1,calendarActive:!0,newSantaActive:!1,randomized:[],ids:[],budget:0,users:[],date:null},n.addUser=function(e){n.state.users.find(function(t){return t.id===e.id})||n.setState({users:[].concat(Object(u.a)(n.state.users),[e])})},n.mapIdsForRandomizer=function(e){return e.map(function(e){return e.id})},n.randomizer=function(e){if(!(e.length<2)){var t=Object(u.a)(e),a=Object(u.a)(e),r=t.sort(function(e){return.5-Math.random()});if(!r.find(function(e){return r.indexOf(e)===a.indexOf(e)})){var s=r.map(function(e){return{receiver_id:e,gifter_id:a[r.indexOf(e)]}});n.setState({randomized:s});var i=n.mapRandomizedToPeople(s);return n.setState({mappedPeople:i,randomizedSet:!0}),s}n.randomizer(e)}},n.mapRandomizedToPeople=function(e){return e.map(function(e){var t=n.state.users.find(function(t){return t.id===e.receiver_id});return{gifter:n.state.users.find(function(t){return t.id===e.gifter_id}),receiver:t}})},n.onCalendarChange=function(e){n.setState({date:e}),n.setState({deadlineSet:!0,calendarActive:!1})},n.formatDate=function(e){return e=e.toString(),"".concat(e.split(" ")[1]," ").concat(e.split(" ")[0]," ").concat(e.split(" ")[3])},n.createSecretSanta=Object(o.a)(l.a.mark(function e(){var t,a,r,s,i,c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.state,a=t.date,r=t.randomized,s=t.budget,i=[a.getYear()+1900,a.getMonth()+1,a.getDate()],c={list:r,deadline:i,budget:s},e.next=6,Oe(c);case 6:o=e.sent,console.log(o),n.setState({done:!0}),n.redirectBack();case 10:case"end":return e.stop()}},e,this)})),n.redirectBack=function(){return setTimeout(function(){return n.props.history.push("/santa")},2500)},n.renderSantaList=function(){return Re(r.a.createElement("div",null,r.a.createElement(lt,{friends:n.props.friends,currentUser:n.props.currentUser}),r.a.createElement(b.a,{onClick:n.toggleNewSanta,color:"teal"},"New Secret Santa")))},n.handleCheckboxIncludeSelf=function(){if(n.state.self){var e=JSON.stringify(n.state.users);e=(e=JSON.parse(e)).filter(function(e){return e.id!==n.props.currentUser.id}),n.setState({users:e})}else{var t=JSON.stringify(n.state.users);(t=JSON.parse(t)).push(n.props.currentUser),n.setState({users:t})}n.setState({self:!n.state.self})},n.toggleCalendar=function(){n.setState({calendarActive:!n.state.calendarActive})},n.renderCalendar=function(){var e=n.state,t=e.budgetSet,a=e.calendarActive,s=e.deadlineSet,i=e.date,c=Object(rt.a)(Object(rt.a)(n)),l=c.toggleCalendar,o=c.onCalendarChange;return t&&a?r.a.createElement("div",null,r.a.createElement("div",{style:ee},s?r.a.createElement("h5",null,"Change deadline:"):r.a.createElement("h5",null,"3. Set deadline"),Re(r.a.createElement(dt.a,{locale:"en-EN",onChange:o,value:i})))):Re(r.a.createElement("div",null,r.a.createElement("p",null,i&&"Deadline: ".concat(n.formatDate(i))),!a&&r.a.createElement("div",null,r.a.createElement(b.a,{size:"tiny",onClick:l},"Change deadline"),r.a.createElement("br",null)),r.a.createElement("br",null)))},n.renderSelectedUsers=function(){var e=n.state.users;return e.length>0&&r.a.createElement("div",null,Re(r.a.createElement("h4",null,"Selected users:")),e.map(function(e){return r.a.createElement("div",{key:e.id,style:j},Pe(r.a.createElement("div",{style:Z},r.a.createElement(He.a,{description:"".concat(e.first_name," ").concat(e.last_name),key:e.id}))))}))},n.renderRandomizedPeople=function(){return n.state.mappedPeople&&n.state.mappedPeople.map(function(e){return r.a.createElement("div",{key:e.id,style:k},r.a.createElement("div",{style:Z},Re(r.a.createElement(He.a,{header:"".concat(e.gifter.first_name," ").concat(e.gifter.last_name," \u2192 ").concat(e.receiver.first_name," ").concat(e.receiver.last_name," ")}))))})},n.renderSantaListAndForm=function(){var e=n.props,t=e.currentUser,a=e.friends;return r.a.createElement("div",null,r.a.createElement(lt,{currentUser:t,friends:a}),n.renderSantaForm())},n.toggleNewSanta=function(){n.setState({newSantaActive:!n.state.newSantaActive})},n.budgetSet=function(e){n.setState({budget:parseInt(e)}),e>0?n.setState({budgetSet:!0}):n.setState({budgetSet:!1})},n.renderBudgetSetter=function(){return r.a.createElement("div",null,n.state.users.length>1&&Re(r.a.createElement("div",null,r.a.createElement("h5",null,"2. Set budget:"),"\xa3",r.a.createElement("div",{className:"ui input",style:F},r.a.createElement("input",{placeholder:"budget",type:"number",maxLength:"4",onChange:function(e){return n.budgetSet(e.target.value)}})))))},n.renderRandomizedButton=function(){var e=n.state,t=e.users,a=e.budgetSet,s=e.deadlineSet,i=e.randomizedSet;return t.length<2||!a||!s?r.a.createElement("div",{style:j},r.a.createElement(b.a,{disabled:!0},"Randomize list")):r.a.createElement("div",{style:j},r.a.createElement(b.a,{color:"teal",basic:!0,size:"big",disabled:n.state.loading,onClick:function(){return n.randomizer(n.mapIdsForRandomizer(t))}},i?"Randomize again":"Randomize list"))},n.renderSantaForm=function(){var e=n.state,t=e.self,a=e.randomizedSet,s=e.users;return Ne(r.a.createElement("div",null,r.a.createElement("h3",null,"Create new Secret Santa"),r.a.createElement("div",null,r.a.createElement("div",{style:j},"1. Add people to the randomizer:"),r.a.createElement(ct,{currentUser:n.props.currentUser,users:s,addUser:n.addUser}),r.a.createElement(ot.a,{name:"Include myself",label:"Include myself",checked:!0===t,onChange:function(){return n.handleCheckboxIncludeSelf()}})),n.renderSelectedUsers(),n.renderBudgetSetter(),r.a.createElement("br",null),n.renderCalendar(),n.renderRandomizedPeople(),n.renderRandomizedButton(),r.a.createElement("br",null),n.state.done&&Re(r.a.createElement("h4",null,"Secret Santa created. Now hold on to your shoes...")),a&&r.a.createElement("div",{style:j},r.a.createElement(b.a,{onClick:n.createSecretSanta,color:"teal",size:"huge"},"Complete secret santa")),r.a.createElement("br",null),r.a.createElement("div",{style:j},r.a.createElement(b.a,{onClick:n.toggleNewSanta,basic:!0,size:"tiny",color:"red",disabled:n.state.loading},"Cancel"))))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:G},r.a.createElement(Ie,{title:"Secret Santa"}),this.state.newSantaActive?this.renderSantaListAndForm():this.renderSantaList())}}]),t}(r.a.Component),mt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={addressed:!1},n.handleAccept=function(){var e=Object(o.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.handleAccept(t);case 2:return e.next=4,n.props.refreshFriends(n.props.currentUser);case 4:return e.abrupt("return",n.setState({addressed:"Accepted :)"}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleReject=function(e){n.props.handleReject(e),n.setState({addressed:"Rejected :("})},n.feedCard=function(){var e=n.props.friend;return r.a.createElement(He.a,{fluid:!0},r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Header,null,e.user.first_name," ",e.user.last_name),r.a.createElement(He.a.Meta,null,"wants you to be their friend"),r.a.createElement(b.a,{size:"tiny",color:"teal",onClick:function(){return n.handleAccept(e.friendship_id)}},"Accept"),r.a.createElement(b.a,{size:"tiny",color:"red",onClick:function(){return n.handleReject(e.friendship_id)}},"Reject")))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.addressed?r.a.createElement("div",null,this.state.addressed):this.feedCard()}}]),t}(r.a.Component),ht=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={read:!1},n.setRead=Object(o.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(n.props.santa.id);case 2:if(e.sent.error){e.next=8;break}n.setState({read:!0}),n.props.handleClick(),e.next=9;break;case 8:return e.abrupt("return",alert("The 'Cool' Button broke for some reason"));case 9:case"end":return e.stop()}},e,this)})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.santa;return!this.state.read&&r.a.createElement(He.a,{fluid:!0},r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Header,null,e.receiver.first_name," ",e.receiver.last_name),r.a.createElement(He.a.Meta,null,"You were added to a secret santa list. This person is your receiver. Find out more ",r.a.createElement("a",{href:"/santa/"},"here"),"."),r.a.createElement(b.a,{size:"tiny",color:"teal",onClick:this.setRead},"Cool!")))}}]),t}(r.a.Component),ft=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={unacceptedFriendRequests:[],santas:[]},n.componentDidMount=Object(o.a)(l.a.mark(function e(){var t,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(n.props.currentUser.id);case 2:return t=e.sent,e.next=5,_e(n.props.currentUser.id);case 5:return a=e.sent,r=[],a.length>0&&(r=a.filter(function(e){return!e.read})),e.abrupt("return",n.setState({unacceptedFriendRequests:t,santas:r}));case 9:case"end":return e.stop()}},e,this)})),n.componentWillUnmount=Object(o.a)(l.a.mark(function e(){var t,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(n.props.currentUser.id);case 2:return t=e.sent,e.next=5,_e(n.props.currentUser.id);case 5:return a=e.sent,r=[],a.length>0&&(r=a.filter(function(e){return!e.read})),e.abrupt("return",n.setState({unacceptedFriendRequests:t,santas:r}));case 9:case"end":return e.stop()}},e,this)})),n.handleAccept=function(){var e=Object(o.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t,"confirmed");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleReject=function(){var e=Object(o.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t,"rejected");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.mapUnaccepted=function(){return Re(r.a.createElement("div",null,n.state.santas&&n.state.santas.map(function(e){return r.a.createElement(ht,{santa:e,handleClick:n.pressedCool})}),n.state.unacceptedFriendRequests&&n.state.unacceptedFriendRequests.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(mt,{refreshFriends:n.props.refreshFriends,currentUser:n.props.currentUser,friend:e,handleAccept:n.handleAccept,handleReject:n.handleReject}))})))},n.pressedCool=function(e){var t=Object(u.a)(n.state.santas);t=t.filter(function(t){return t.id!==e}),n.setState({santas:t})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.santas,n=e.unacceptedFriendRequests;return this.props.clicked&&r.a.createElement("div",{style:H},Re(r.a.createElement("div",null,0===n.length&&0===t.length?r.a.createElement("h4",null,"No new notifications"):this.mapUnaccepted())))}}]),t}(r.a.Component),gt=(n(377),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return Re(r.a.createElement("div",null,r.a.createElement("div",{style:I},r.a.createElement("h1",null,"404 :( page not found")),r.a.createElement("div",{style:I},r.a.createElement(b.a,{basic:!0,color:"teal",onClick:function(){e.props.history.push("/")}},"F"))))}}]),t}(r.a.Component)),vt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).mapWishCount=function(e){return e.wishes&&e.wishes.length>0?"has made ".concat(e.wishes.length," wishes"):"hasn't made any wishes"},n.friendCard=function(e){return Re(r.a.createElement(He.a,{key:e.id,onClick:function(){return n.handleClick(e)},style:U},r.a.createElement("div",{style:T},r.a.createElement("img",{alt:"user profile pic",style:D,src:e.img_url||"https://pngimage.net/wp-content/uploads/2018/05/default-user-png-2.png"})),r.a.createElement(He.a.Content,null,r.a.createElement(He.a.Header,null,(e.first_name?e.first_name:"")+" "+(e.last_name?e.last_name:"")),r.a.createElement(He.a.Meta,null,e.age?e.age:""),r.a.createElement(He.a.Description,null,n.mapWishCount(e))),r.a.createElement(He.a.Content,{extra:!0})))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleClick",value:function(e){this.props.toggleSelectFriend(e)}},{key:"render",value:function(){var e=this.props.friend;return r.a.createElement("div",null,this.friendCard(e))}}]),t}(r.a.Component),Et=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={friends:[],selectedFriend:null},n.toggleSelectFriend=function(e){n.state.selectedFriend?n.setState({selectedFriend:null}):n.setState({selectedFriend:e})},n.selectedFriend=function(){return r.a.createElement(et,{currentUser:n.props.currentUser,resetUser:n.toggleSelectFriend,user:n.state.selectedFriend,gifts:n.state.selectedFriend.wishes,search:!0})},n.noFriendsExist=function(){return r.a.createElement("div",{style:U},r.a.createElement(Ie,{title:"Friends"}),r.a.createElement("h5",{style:I},"No friends added yet"))},n.friendsExist=function(){if(n.state.friends)return r.a.createElement("div",null,r.a.createElement("div",{style:U},r.a.createElement(Ie,{title:"Friends"}),r.a.createElement(He.a.Group,{className:"ui center aligned grid",itemsPerRow:2,style:_},n.state.friends.map(function(e){return r.a.createElement(vt,{key:e.id,friend:e,toggleSelectFriend:n.toggleSelectFriend})}))))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.friends&&this.props.friends.length>0?this.setState({friends:this.props.friends}):this.setState({friends:[]})}},{key:"render",value:function(){return this.state.friends.length>0&&!this.state.selectedFriend?this.friendsExist():this.state.friends.length<1&&!this.state.selectedFriend?this.noFriendsExist():this.state.friends.length>0&&this.state.selectedFriend?this.selectedFriend():r.a.createElement("div",null,"loading...")}}]),t}(r.a.Component),bt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={notificationsClicked:!1,navBarItem:"",currentUser:null,gifts:[],friends:[]},n.toggleAppear=function(){n.setState({appear:!n.state.appear})},n.setUser=function(e){return n.setState({currentUser:e})},n.backToWelcome=function(){return n.props.history.push("/")},n.setUserToLocalStorage=function(e){localStorage.setItem("email",e.email),localStorage.setItem("currentUser",JSON.stringify(e))},n.toggleNotificationsClicked=function(){return n.setState({notificationsClicked:!n.state.notificationsClicked})},n.handleNavBarChange=function(e){n.setState({navBarItem:e,notificationsClicked:!1}),n.props.history.push("/".concat(e))},n.deleteWish=function(e){var t=Object(u.a)(n.state.gifts);return t=t.filter(function(t){return t.id!==e}),n.setState({gifts:t})},n.deleteWishFromDB=function(e){return Se(e)},n.handleNewWish=function(e){return e.user_id=n.state.currentUser.id,ye(e).then(function(e){n.setState({gifts:[].concat(Object(u.a)(n.state.gifts),[e])})}).then(n.props.history.push("/wishlist"))},n.getWishes=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:return t=e.sent,e.abrupt("return",n.setState({gifts:t}));case 4:case"end":return e.stop()}},e,this)})),n.getFriends=function(){var e=Object(o.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t.id);case 2:return a=e.sent,e.abrupt("return",n.setState({friends:a}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.setUserData=function(){var e=Object(o.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.user){e.next=8;break}return e.next=3,n.setState({currentUser:t.user});case 3:return e.next=5,n.getWishes();case 5:return e.next=7,n.getFriends(t.user);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleLogin=function(){var e=Object(o.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t.email,t.password);case 2:(a=e.sent).error?alert(a.error):(localStorage.removeItem("currentUser"),localStorage.setItem("currentUser",JSON.stringify(a.user)),localStorage.setItem("token",a.token),n.props.history.push("/"),a&&n.setUserData(a));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleLogout=function(){localStorage.removeItem("currentUser"),localStorage.removeItem("token"),n.setState({currentUser:null})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ie,{headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:(t=e.sent)&&t.error?this.handleLogout():t&&this.setUserData(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.currentUser,a=t.navBarItem;return this.state.currentUser?r.a.createElement("div",null,r.a.createElement("div",null,this.state.notificationsClicked&&r.a.createElement(ft,{clicked:this.state.notificationsClicked,refreshFriends:this.getFriends,currentUser:this.state.currentUser})),r.a.createElement(g.a,null,r.a.createElement(v.a,{component:function(t){return r.a.createElement(at,Object.assign({},t,{handleItemClick:e.handleNavBarChange,activeItem:a,toggleNotificationsClicked:e.toggleNotificationsClicked,notificationsClicked:e.state.notificationsClicked}))}})),r.a.createElement("div",{style:w},r.a.createElement(g.a,null,r.a.createElement(v.a,{path:"/friends",component:function(t){return r.a.createElement(Et,Object.assign({},t,{currentUser:e.state.currentUser,friends:e.state.friends}))}}),r.a.createElement(v.a,{path:"/santa",component:function(t){return r.a.createElement("div",null,r.a.createElement(pt,Object.assign({currentUser:e.state.currentUser,friends:e.state.friends},t)))}}),r.a.createElement(v.a,{path:"/profile",component:function(t){return r.a.createElement(Xe,Object.assign({},t,{self:!0,user:n,setUser:e.setUser,gifts:e.state.gifts,handleLogin:e.handleLogin,handleSubmit:e.handleEditProfile,authenticate:e.authenticate,logout:e.handleLogout}))}}),r.a.createElement(v.a,{exact:!0,path:"/wishlist",component:function(t){return r.a.createElement(et,Object.assign({},t,{deleteWishFromDB:e.deleteWishFromDB,deleteWish:e.deleteWish,currentUser:n,gifts:e.state.gifts}))}}),r.a.createElement(v.a,{exact:!0,path:"/",component:function(t){return r.a.createElement(tt,Object.assign({},t,{friends:e.state.friends,currentUser:e.state.currentUser}))}}),r.a.createElement(v.a,{exact:!0,path:"/new_wish",component:function(t){return r.a.createElement(Te,Object.assign({},t,{handleSubmit:e.handleNewWish}))}}),r.a.createElement(v.a,{path:"/:error",component:function(e){return r.a.createElement(gt,e)}})))):r.a.createElement("div",{style:w},r.a.createElement(g.a,null,r.a.createElement(v.a,{exact:!0,path:"/",component:function(e){return r.a.createElement(De,e)}}),r.a.createElement(v.a,{exact:!0,path:"/login",component:function(t){return r.a.createElement(te,Object.assign({},t,{handleLogin:e.handleLogin,back:e.backToWelcome}))}}),r.a.createElement(v.a,{exact:!0,path:"/signup",component:function(t){return r.a.createElement(Me,Object.assign({},t,{handleLogin:e.handleLogin,back:e.backToWelcome}))}}),r.a.createElement(v.a,{path:"/:error",component:function(e){return r.a.createElement(gt,e)}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var yt=n(398);i.a.render(r.a.createElement(yt.a,null,r.a.createElement(v.a,{component:function(e){return r.a.createElement(bt,e)}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[200,2,1]]]);
//# sourceMappingURL=main.50e508b9.chunk.js.map